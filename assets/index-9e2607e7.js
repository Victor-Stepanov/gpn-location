var p=Object.defineProperty;var y=(o,t,r)=>t in o?p(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r;var l=(o,t,r)=>(y(o,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=r(e);fetch(e.href,n)}})();const h="https://suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address",m="1ad90d50c0f2d8b95e465e2c807c4c82b2a6d0c9",u=document.querySelector(".container"),i=u.querySelector(".location"),c={adress:i==null?void 0:i.querySelector(".adress"),latitude:i==null?void 0:i.querySelector(".latitude"),longitude:i==null?void 0:i.querySelector(".longitude"),button:u==null?void 0:u.querySelector(".button")};class C{constructor(t){l(this,"url");this.url=t}parseResponse(t){return t.ok?t.json():Promise.reject(`Ошибка: ${t.status}`)}getCurrentCoordinates(){return new Promise((t,r)=>{navigator.geolocation.getCurrentPosition(({coords:s})=>{const{latitude:e,longitude:n}=s;t({latitude:e,longitude:n})},s=>{r(s)})})}async getCurrentLocation(){const{latitude:t,longitude:r}=await this.getCurrentCoordinates(),s=await fetch(this.url,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+m},body:JSON.stringify({lat:t,lon:r})});return this.parseResponse(s)}}const d=new C(h);async function b(){try{const{latitude:o,longitude:t}=await d.getCurrentCoordinates(),{suggestions:r}=await d.getCurrentLocation(),s=r[0].value;return{latitude:o,longitude:t,adress:s}}catch(o){throw new Error(o.message)}}function f(o){o.preventDefault(),c.button.textContent="Определение...",b().then(({adress:t,latitude:r,longitude:s})=>{c.adress.textContent=`Адрес: ${t}`,c.latitude.textContent=`Широта: ${String(r)}`,c.longitude.textContent=`Долгота: ${String(s)}`}).catch(t=>console.error(t)).finally(()=>{var t;c.button.textContent="Где я?",(t=c.button)==null||t.removeEventListener("click",f)})}var g;(g=c.button)==null||g.addEventListener("click",f);
